(window.webpackJsonp=window.webpackJsonp||[]).push([[6,5],{268:function(t,e,n){"use strict";var r=n(270),o=new(n.n(r).a)("https://stonxs.herokuapp.com");e.a=o},269:function(t,e,n){var content=n(278);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(53).default)("6e815088",content,!0,{sourceMap:!1})},271:function(t,e){},276:function(t,e){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Coins"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"coins"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"symbol"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"amount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"initPrice"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:84}};n.loc.source={body:"query Coins {\n  coins {\n  \tid\n  \tusername\n    symbol\n    amount\n    initPrice\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function r(t,e){if("FragmentSpread"===t.kind)e.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&e.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){r(t,e)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){r(t,e)})),t.definitions&&t.definitions.forEach((function(t){r(t,e)}))}var o={};function c(t,e){for(var i=0;i<t.definitions.length;i++){var element=t.definitions[i];if(element.name&&element.name.value==e)return element}}n.definitions.forEach((function(t){if(t.name){var e=new Set;r(t,e),o[t.name.value]=e}})),t.exports=n,t.exports.Coins=function(t,e){var n={kind:t.kind,definitions:[c(t,e)]};t.hasOwnProperty("loc")&&(n.loc=t.loc);var r=o[e]||new Set,l=new Set,d=new Set;for(r.forEach((function(t){d.add(t)}));d.size>0;){var f=d;d=new Set,f.forEach((function(t){l.has(t)||(l.add(t),(o[t]||new Set).forEach((function(t){d.add(t)})))}))}return l.forEach((function(e){var r=c(t,e);r&&n.definitions.push(r)})),n}(n,"Coins")},277:function(t,e,n){"use strict";n(269)},278:function(t,e,n){var r=n(52)(!1);r.push([t.i,".wallet table thead{border-bottom:2px solid rgba(0,0,0,.4)}",""]),t.exports=r},279:function(t,e,n){"use strict";n.r(e);var r=n(11),o=(n(51),n(32),n(64),n(74),n(194),n(276)),c=n.n(o),l=n(268),d={data:function(){return{coins:[]}},methods:{currentPrice:function(t){var e=t.symbol,n=this.$parent.coins.filter((function(t){return t.symbol.toLowerCase().includes(e.toLowerCase())}))[0];return parseFloat(n.price).toFixed(4)},currentProfit:function(t){return((this.currentPrice(t)-t.initPrice)*t.amount).toFixed(4)},currentStonks:function(t){return(t.initPrice*t.amount/this.currentProfit(t)).toFixed(2)},removeFromWallet:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,l.a.deleteEntry("coins",t);case 3:alert("Монета удалена"),location.reload(),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),e.loading=!1,console.log("Ошибка");case 11:case"end":return n.stop()}}),n,null,[[0,7]])})))()}},apollo:{coins:{prefetch:!0,query:c.a,variables:function(){return{username:this.$store.getters["auth/username"]}}}}},f=(n(277),n(38)),component=Object(f.a)(d,(function(){var t=this,e=this,n=e.$createElement,r=e._self._c||n;return r("div",{staticClass:"wallet"},[r("h2",{staticClass:"wallet-title"},[e._v("Мой кошелек")]),e._v(" "),r("table",{staticClass:"uk-table uk-table"},[e._m(0),e._v(" "),r("tbody",e._l(e.coins.filter((function(e){return e.username===t.$store.getters["auth/username"]})),(function(t,n){return r("tr",[r("td",{staticClass:"uk-width-1-6"},[e._v(e._s(t.symbol))]),e._v(" "),r("td",{ref:"inWallet",refInFor:!0,staticClass:"uk-width-1-6"},[e._v(e._s(t.amount))]),e._v(" "),r("td",{ref:"initPrice",refInFor:!0,staticClass:"uk-width-1-6"},[e._v(e._s(t.initPrice))]),e._v(" "),r("td",{ref:"`currentOf${coin.symbol}`",refInFor:!0,staticClass:"uk-width-1-6"},[e._v(e._s(e.currentPrice(t)))]),e._v(" "),r("td",{ref:"gainings",refInFor:!0,staticClass:"uk-width-1-6"},[e._v(e._s(e.currentProfit(t)))]),e._v(" "),r("td",{staticClass:"uk-width-1-6"},[r("p",{ref:"stonks",refInFor:!0},[e._v(e._s(e.currentStonks(t)))])]),e._v(" "),r("td",{staticClass:"uk-width-1-7"},[r("a",[r("span",{staticClass:"uk-badge",staticStyle:{background:"#1C1C1C"},on:{click:function(n){return e.removeFromWallet(t.id)}}},[e._v("-")])])])])})),0)])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("td",[t._v("валюта")]),t._v(" "),n("td",[t._v("баланс")]),t._v(" "),n("td",[t._v("старт цена")]),t._v(" "),n("td",[t._v("текущая цена")]),t._v(" "),n("td",[t._v("прибыль")]),t._v(" "),n("td",[t._v("stonks, %")]),t._v(" "),n("td",[t._v("x")])])])}],!1,null,null,null);e.default=component.exports},286:function(t,e,n){var content=n(318);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(53).default)("60835984",content,!0,{sourceMap:!1})},317:function(t,e,n){"use strict";n(286)},318:function(t,e,n){var r=n(52)(!1);r.push([t.i,".page-wrapper{max-width:100%;margin:0 auto;min-height:100vh;display:flex;justify-content:center;align-items:center;text-align:center}.search-wrapper{margin-top:20px}.search-wrapper .uk-search input{border-radius:5px}.currencies{color:hsla(0,0%,100%,.8);max-width:100vw}.currencies table thead{color:#f5cb42;font-weight:600;text-transform:uppercase}.page-grid{margin-top:30px;width:95%;display:grid;grid-template-columns:2fr 1fr}.wallet{display:flex;flex-direction:column;background:hsla(0,0%,100%,.6);padding:10px 0;border-radius:10px;margin-top:20px;color:#1c1c1c}.uk-table td{padding:5px}.coin-modal{display:none;flex-direction:column;position:absolute;top:30%;left:40vw;width:250px;margin:auto;z-index:1002;background:#fff;padding:20px;border-radius:5px}.coin-modal input{text-align:center;border:2px solid rgba(0,0,0,.4)}.coin-modal .uk-button{margin-top:10px}@media(max-width:600px){.page-grid{grid-template-columns:1fr}.wallet table{font-size:12px}.uk-table td{padding:3px}.currencies table td{max-width:100px}}",""]),t.exports=r},321:function(t,e,n){"use strict";n.r(e);var r=n(11),o=(n(51),n(32),n(64),n(74),n(20),n(75),n(279),n(268)),c={data:function(){return{coins:[],query:"",symbol:"",amount:0,initPrice:0}},computed:{username:function(){return this.$store.getters["auth/username"]},filteredList:function(){var t=this;return this.coins.filter((function(e){return e.symbol.toLowerCase().includes(t.query.toLowerCase())}))}},asyncData:function(t){return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://api.binance.com/api/v3/ticker/price").then((function(t){return t.json()})).then((function(data){return{coins:data}}));case 3:return t.abrupt("return",t.sent);case 6:t.prev=6,t.t0=t.catch(0),console.error("SOMETHING WENT WRONG :"+t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},mounted:function(){var t=this;setInterval((function(){t.$nuxt.refresh()}),4e3)},methods:{addToWallet:function(t){this.$refs.modal.style.display="flex",this.$refs.modalTitle.innerText=t.symbol},handleSubmit:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,o.a.createEntry("coins",{symbol:t.$refs.modalTitle.textContent,amount:parseFloat(t.amount),initPrice:parseFloat(t.initPrice),username:t.username});case 4:alert("Монета добавлена в кошелек"),location.reload(),t.$refs.modal.style.display="none",t.$router.push("/"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),t.loading=!1,console.log("Ошибка");case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))()},closeModal:function(){this.$refs.modal.style.display="none"}}},l=(n(317),n(38)),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-wrapper"},[n("div",{staticClass:"page-grid"},[t.username?n("div",{staticClass:"left"},[n("Wallet")],1):n("div",[n("div",{staticClass:"uk-margin"},[n("p",[t._v("\n            Для доступа к кошельку необходимо\n          "),n("router-link",{attrs:{to:{name:"login"}}},[t._v("\n             войти\n          ")]),t._v(" или  "),n("router-link",{attrs:{to:{name:"register"}}},[t._v("зарегистрироваться\n          ")])],1)])]),t._v(" "),n("div",{staticClass:"currencies"},[n("div",{staticClass:"search-wrapper"},[n("form",{staticClass:"uk-search uk-search-default"},[n("span",{attrs:{"uk-search-icon":""}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"uk-search-input",attrs:{type:"search",placeholder:"Искать..."},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}})])]),t._v(" "),n("table",{staticClass:"uk-table uk-table"},[t._m(0),t._v(" "),n("tbody",t._l(t.filteredList,(function(e){return n("tr",[n("td",[t._v(t._s(e.symbol))]),t._v(" "),n("td",[t._v(t._s(parseFloat(e.price).toFixed(5)))]),t._v(" "),n("td",[n("a",[n("span",{staticClass:"uk-badge",staticStyle:{background:"rgba(255,255,255,.2)"},on:{click:function(n){return t.addToWallet(e)}}},[t._v("+")])])])])})),0)]),t._v(" "),n("div",{ref:"modal",staticClass:"coin-modal"},[n("span",{staticClass:"uk-badge",staticStyle:{background:"rgba(0,0,0,.4)",position:"absolute",right:"3px",top:"3px"},on:{click:t.closeModal}},[t._v("x")]),t._v(" "),n("h4",{ref:"modalTitle",staticClass:"coin-title"}),t._v(" "),n("form",{staticClass:"uk-form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[n("label",{staticClass:"uk-form-label"},[t._v("Количество")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],staticClass:"uk-input",attrs:{type:"text"},domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=e.target.value)}}}),t._v(" "),n("label",{staticClass:"uk-form-label"},[t._v("Старт цена")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.initPrice,expression:"initPrice"}],staticClass:"uk-input",attrs:{type:"text"},domProps:{value:t.initPrice},on:{input:function(e){e.target.composing||(t.initPrice=e.target.value)}}}),t._v(" "),n("button",{staticClass:"uk-button uk-button-primary",attrs:{name:"button"}},[t._v("Добавить")])])])])])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("td",[t._v("валюта")]),t._v(" "),n("td",[t._v("цена")]),t._v(" "),n("td",[t._v("+")])])])}],!1,null,null,null);e.default=component.exports;installComponents(component,{Wallet:n(279).default})}}]);